<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>MisterAI GPT</title>
<style>
    body { margin:0; padding:0; background:#000; font-family:"Cairo"; color:#fff; overflow:hidden; }
    #stars, #stars2, #stars3 {
        position:fixed; top:0; left:0; width:100%; height:100%;
        background:url('https://i.imgur.com/1N1KxW9.png') repeat;
    }
    #stars { animation:animStar 50s linear infinite; opacity:1; }
    #stars2 { animation:animStar 100s linear infinite; opacity:.6; }
    #stars3 { animation:animStar 150s linear infinite; opacity:.3; }
    @keyframes animStar { from{background-position:0 0;} to{background-position:0 2000px;} }

    .chat-box {
        width:55%; height:70%; margin:auto; margin-top:60px;
        border:3px solid #00ffe7; border-radius:20px;
        padding:20px; background:rgba(0,0,0,.6);
        box-shadow:0 0 25px #00ffe7; overflow-y:auto; position:relative; z-index:3;
    }
    .message {
        padding:10px 15px; margin:10px 0;
        background:rgba(0,255,200,0.1);
        border:1px solid #00ffe7; border-radius:10px; width:fit-content; max-width:80%;
        white-space:pre-wrap;
    }
    .bottom-bar { width:55%; margin:auto; margin-top:10px; display:flex; gap:10px; z-index:3; }
    input {
        flex:1; padding:12px; border-radius:10px;
        border:2px solid #00ffe7; background:#001a1a; color:#fff; outline:none;
    }
    button {
        padding:12px 20px; background:#4c00ff; border:none; border-radius:10px;
        color:#fff; cursor:pointer; font-size:16px; box-shadow:0 0 10px #4c00ff;
    }
</style>
</head>
<body>

<div id="stars"></div><div id="stars2"></div><div id="stars3"></div>

<h1 style="text-align:center; color:#00ffe7; margin-top:20px; position:relative; z-index:3;">
    MisterAI GPT ü§ñ
</h1>

<div id="chat" class="chat-box"></div>

<div class="bottom-bar">
    <input id="msgInput" type="text" placeholder="ÿßŸÉÿ™ÿ® ÿ±ÿ≥ÿßŸÑÿ™ŸÉ...">
    <button onclick="sendMessage()">ÿ•ÿ±ÿ≥ÿßŸÑ</button>
</div>

<script>
function addMessage(text, sender="user") {
    let box = document.getElementById("chat");
    let div = document.createElement("div");
    div.className = "message";
    div.innerHTML = (sender === "user" ? "üßë‚Äçüíª " : "ü§ñ ") + text;
    box.appendChild(div);
    box.scrollTop = box.scrollHeight;
}

function refreshStars() {
    ["stars","stars2","stars3"].forEach(id=>{
        let el = document.getElementById(id);
        el.style.animation = "none";
        void el.offsetWidth;
        if(id==="stars") el.style.animation="animStar 50s linear infinite";
        if(id==="stars2") el.style.animation="animStar 100s linear infinite";
        if(id==="stars3") el.style.animation="animStar 150s linear infinite";
    });
}

async function sendMessage() {
    let input = document.getElementById("msgInput");
    let msg = input.value.trim();
    if(!msg) return;

    addMessage(msg,"user");
    input.value = "";
    refreshStars();

    addMessage("‚è≥ ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ŸÅŸÉŸäÿ±...","bot");

    const res = await fetch("/api/chat", {
        method: "POST",
        headers: { "Content-Type":"application/json" },
        body: JSON.stringify({ message: msg })
    });

    const data = await res.json();

    document.querySelectorAll(".message").forEach(m=>{
        if(m.textContent.includes("ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ŸÅŸÉŸäÿ±")) m.remove();
    });

    addMessage(data.reply,"bot");
}
</script>

</body>
</html>

